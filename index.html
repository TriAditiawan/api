<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- font  -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- bottstrap icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <!-- icon 2 -->
    <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet">
    <!-- my css -->
    <link rel="stylesheet" href="./style.css" />

    <title>cuaca</title>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="#home">Tri Aditiawan</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="./index.html">Cuaca </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="./cuaca2.html">Cuaca bmkg</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="./jadwalsholat.html">Jadwal Sholat </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="./gambar-anime.html">Gambar anime </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="./tentang.html">Tentang </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Akhir Navbar -->
    <!-- content -->
    <section id="home">
     
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-6">
            <div class="card card1">
              <h5 class="card-header pt-3 pb-3">Aplikasi cuaca</h5>
              <div class="card-body">
                <form action="" class="mb-3 mt-2">
                  <label for="">Masukan nama kota</label>
                  <input type="text" class="form-control input-keyword mt-2" id="search-input" />
                  <button type="button" class="btn btn-satu mt-3" id="search-button">Lihat</button>
              </div>
            </div>
          </div>
        </div>
        <div class="row pt-3 justify-content-center " id="gagal">
          
        </div>
        <div class="row justify-content-center">
          <div class="col-md-6 "id="tampil-data">
           
          </div>
        </div>
      </div>
    </section>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
      <path
        fill="#43affc"
        fill-opacity="1"
        d="M0,96L60,90.7C120,85,240,75,360,101.3C480,128,600,192,720,213.3C840,235,960,213,1080,192C1200,171,1320,149,1380,138.7L1440,128L1440,0L1380,0C1320,0,1200,0,1080,0C960,0,840,0,720,0C600,0,480,0,360,0C240,0,120,0,60,0L0,0Z"
      ></path>
    </svg>

    <!-- content -->
    <!-- footer -->
    <footer class="text-center">
      <img src="p.jpg" alt="img eror" width="80" class="rounded-circle img-thumbnail mb-2"><br>
      <a href="https://www.instagram.com/triaditiawan0/">Tri Aditiawan</a>
      <p class="text-center mt-3">Dibuat dengan <i class="bi bi-heart-fill text-danger"></i> oleh <a href="https://github.com/TriAditiawan">Tri</a></p>
    </footer>
    <!--Akhir footer -->
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script>
      $('#search-button').on('click', function(){
        
       
        $.ajax({
          url:'https://api.openweathermap.org/data/2.5/weather',
          type:'get',
          dataType:'json',
          data:{
            'APPID':'8510c6d2b69034ad111c216139de884d',
            'q':$('#search-input').val(),
            'units':'metric',
            'lang':'id'
          },
          success:function(result){
            $("#gagal").html(``);
                    
            $('#tampil-data').html(`
             <div class="card mt-3">
             <h5 class="card-header pt-3 pb-3"><i class="bx bx-map"></i> `+result.name+`, <span class="negara"></span></h5>
             <div class="card-body">
              <img src="" class="card-icon" alt="...">
              <h5 class="card-title card-title2 text-center">`+result.main.temp+`</h5>
              <h4 class="text-center deskt">`+result.weather[0].description+`</h4>
              <p>Temperatur dari `+result.main.temp_min+`°C hingga `+result.main.temp_max+`°C </p>
              <p>Kecepatan angin `+result.wind.speed+`m/s</p>
              <p>Awan `+result.clouds.all+`%</p>
              <p>koordinat geografis: [`+result.coord.lat+` `+result.coord.lon+`]</p>
              <div class="row bawah">
                <div class="col-6 d-flex">
                  <i class="bx bxs-thermometer"></i>
                  <div class="detail">
                    <p> `+result.main.feels_like+`°C</p>
                    <p>terasa seperti</p>  
                  </div>
               
               </div>
               <div class="col-6 d-flex">
                <i class="bx bxs-droplet-half"></i>
                <div class="detail">
                  <p> `+result.main.humidity+`%</p>
                  <p>Kelembapan</p>
                  
                </div
                
                </div>
              </div>
              </div>
              </div>
              `)
              var id =result.weather[0].id;
           if (id == 800) {
               $('.card-icon').attr('src', 'icons/clear.svg');
              } else if (id >= 200 && id <= 232) {
                $('.card-icon').attr('src', 'icons/storm.svg');
              } 
              else if (id >= 600 && id <= 622) {
              $('.card-icon').attr('src', 'icons/snow.svg');
              } else if (id >= 701 && id <= 781) {
              $('.card-icon').attr('src', 'icons/haze.svg');
              } else if (id >= 801 && id <= 804) {
              $('.card-icon').attr('src', 'icons/cloud.svg');
              } else if ((id >= 500 && id <= 531) || (id >= 300 && id <= 321)) {
              $('.card-icon').attr('src', 'icons/rain.svg');
              }    
              const negara =result.sys.country;
              console.log(negara);
              if(negara=="ID"){
               $('.negara').html('Indonesia');
              }else if(negara=="JP"){
               $('.negara').html('Jepang');
              }else if(negara=="US"){
               $('.negara').html('Amerika serikat');
              }
          },
          error:function(gagal){
            const pesanKesalahan = $("#gagal");
            $('#tampil-data').html(``);
            pesanKesalahan.html(`<div class="col-md-6">
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              <strong>Gagal mengambil data, </strong></br> coba periksa ejaan kota yang anda masukan. </br>Coba cek koneksi internet anda. 
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          </div>`)
          }
        })
      })
    </script>

    <!-- Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
